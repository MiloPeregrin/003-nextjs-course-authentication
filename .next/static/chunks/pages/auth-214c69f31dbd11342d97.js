_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[8],{"20a2":function(e,t,n){e.exports=n("nOHt")},DTHg:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth",function(){return n("yk4J")}])},"HaE+":function(e,t,n){"use strict";function r(e,t,n,r,c,o,a){try{var s=e[o](a),i=s.value}catch(u){return void n(u)}s.done?t(i):Promise.resolve(i).then(r,c)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(c,o){var a=e.apply(t,n);function s(e){r(a,c,o,s,i,"next",e)}function i(e){r(a,c,o,s,i,"throw",e)}s(void 0)}))}}n.d(t,"a",(function(){return c}))},yk4J:function(e,t,n){"use strict";n.r(t);var r=n("nKUr"),c=n("20a2"),o=n("nGE6"),a=n("q1tI"),s=n("o0o1"),i=n.n(s),u=n("HaE+"),l=n("ypdz"),f=n.n(l);function p(e,t){return d.apply(this,arguments)}function d(){return(d=Object(u.a)(i.a.mark((function e(t,n){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("api/auth/signup",{method:"POST",body:JSON.stringify({email:t,password:n}),headers:{"Content-Type":"application/json"}});case 2:return r=e.sent,e.next=5,r.json();case 5:if(c=e.sent,r.ok){e.next=8;break}throw new Error(c.message||"Something went wrong");case 8:return e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=function(){var e=Object(a.useRef)(),t=Object(a.useRef)(),n=Object(a.useState)(!0),s=n[0],l=n[1],d=Object(c.useRouter)();function h(){return(h=Object(u.a)(i.a.mark((function n(r){var c,a,u;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),c=e.current.value,a=t.current.value,s)Object(o.signIn)("credentials",{redirect:!1,email:c,password:a}).error||d.replace("/profile");else try{u=p(c,a),console.log(u)}catch(i){console.log(i)}case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(r.jsxs)("section",{className:f.a.auth,children:[Object(r.jsx)("h1",{children:s?"Login":"Sign Up"}),Object(r.jsxs)("form",{onSubmit:function(e){return h.apply(this,arguments)},children:[Object(r.jsxs)("div",{className:f.a.control,children:[Object(r.jsx)("label",{htmlFor:"email",children:"Your Email"}),Object(r.jsx)("input",{type:"email",id:"email",required:!0,ref:e})]}),Object(r.jsxs)("div",{className:f.a.control,children:[Object(r.jsx)("label",{htmlFor:"password",children:"Your Password"}),Object(r.jsx)("input",{type:"password",id:"password",required:!0,ref:t})]}),Object(r.jsxs)("div",{className:f.a.actions,children:[Object(r.jsx)("button",{children:s?"Login":"Create Account"}),Object(r.jsx)("button",{type:"button",className:f.a.toggle,onClick:function(){l((function(e){return!e}))},children:s?"Create new account":"Login with existing account"})]})]})]})};t.default=function(){var e=Object(a.useState)(!0),t=e[0],n=e[1],s=Object(c.useRouter)();return Object(a.useEffect)((function(){Object(o.getSession)().then((function(e){e?s.replace("/"):n(!1)}))}),[s]),t?Object(r.jsx)("p",{children:"Loading..."}):Object(r.jsx)(h,{})}},ypdz:function(e,t,n){e.exports={auth:"auth-form_auth__3FfGf",control:"auth-form_control__2m7EA",actions:"auth-form_actions__2JT2z",toggle:"auth-form_toggle__2PHeb"}}},[["DTHg",0,1,2,3,4]]]);