{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[8],{\"20a2\":function(e,t,n){e.exports=n(\"nOHt\")},DTHg:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/auth\",function(){return n(\"yk4J\")}])},\"HaE+\":function(e,t,n){\"use strict\";function r(e,t,n,r,c,o,a){try{var s=e[o](a),i=s.value}catch(u){return void n(u)}s.done?t(i):Promise.resolve(i).then(r,c)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(c,o){var a=e.apply(t,n);function s(e){r(a,c,o,s,i,\"next\",e)}function i(e){r(a,c,o,s,i,\"throw\",e)}s(void 0)}))}}n.d(t,\"a\",(function(){return c}))},yk4J:function(e,t,n){\"use strict\";n.r(t);var r=n(\"nKUr\"),c=n(\"20a2\"),o=n(\"nGE6\"),a=n(\"q1tI\"),s=n(\"o0o1\"),i=n.n(s),u=n(\"HaE+\"),l=n(\"ypdz\"),f=n.n(l);function p(e,t){return d.apply(this,arguments)}function d(){return(d=Object(u.a)(i.a.mark((function e(t,n){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(\"api/auth/signup\",{method:\"POST\",body:JSON.stringify({email:t,password:n}),headers:{\"Content-Type\":\"application/json\"}});case 2:return r=e.sent,e.next=5,r.json();case 5:if(c=e.sent,r.ok){e.next=8;break}throw new Error(c.message||\"Something went wrong\");case 8:return e.abrupt(\"return\",c);case 9:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}var h=function(){var e=Object(a.useRef)(),t=Object(a.useRef)(),n=Object(a.useState)(!0),s=n[0],l=n[1],d=Object(c.useRouter)();function h(){return(h=Object(u.a)(i.a.mark((function n(r){var c,a,u;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),c=e.current.value,a=t.current.value,s)Object(o.signIn)(\"credentials\",{redirect:!1,email:c,password:a}).error||d.replace(\"/profile\");else try{u=p(c,a),console.log(u)}catch(i){console.log(i)}case 4:case\"end\":return n.stop()}}),n)})))).apply(this,arguments)}return Object(r.jsxs)(\"section\",{className:f.a.auth,children:[Object(r.jsx)(\"h1\",{children:s?\"Login\":\"Sign Up\"}),Object(r.jsxs)(\"form\",{onSubmit:function(e){return h.apply(this,arguments)},children:[Object(r.jsxs)(\"div\",{className:f.a.control,children:[Object(r.jsx)(\"label\",{htmlFor:\"email\",children:\"Your Email\"}),Object(r.jsx)(\"input\",{type:\"email\",id:\"email\",required:!0,ref:e})]}),Object(r.jsxs)(\"div\",{className:f.a.control,children:[Object(r.jsx)(\"label\",{htmlFor:\"password\",children:\"Your Password\"}),Object(r.jsx)(\"input\",{type:\"password\",id:\"password\",required:!0,ref:t})]}),Object(r.jsxs)(\"div\",{className:f.a.actions,children:[Object(r.jsx)(\"button\",{children:s?\"Login\":\"Create Account\"}),Object(r.jsx)(\"button\",{type:\"button\",className:f.a.toggle,onClick:function(){l((function(e){return!e}))},children:s?\"Create new account\":\"Login with existing account\"})]})]})]})};t.default=function(){var e=Object(a.useState)(!0),t=e[0],n=e[1],s=Object(c.useRouter)();return Object(a.useEffect)((function(){Object(o.getSession)().then((function(e){e?s.replace(\"/\"):n(!1)}))}),[s]),t?Object(r.jsx)(\"p\",{children:\"Loading...\"}):Object(r.jsx)(h,{})}},ypdz:function(e,t,n){e.exports={auth:\"auth-form_auth__3FfGf\",control:\"auth-form_control__2m7EA\",actions:\"auth-form_actions__2JT2z\",toggle:\"auth-form_toggle__2PHeb\"}}},[[\"DTHg\",0,1,2,3,4]]]);","map":{"version":3,"sources":["static/chunks/pages/auth-214c69f31dbd11342d97.js"],"names":["_N_E","window","push","20a2","module","exports","__webpack_require__","DTHg","__NEXT_P","HaE+","__webpack_exports__","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","d","yk4J","r","jsx_runtime","next_router","client","react","regenerator","regenerator_default","n","asyncToGenerator","auth_form_module","auth_form_module_default","createUser","_x","_x2","_createUser","Object","a","mark","_callee2","email","password","response","data","wrap","_context2","prev","next","fetch","method","body","JSON","stringify","headers","Content-Type","sent","json","ok","Error","message","abrupt","stop","auth_form","emailInputRef","passwordInputRef","_useState","isLogin","setIsLogin","router","_submitHandler","_callee","event","enteredEmail","enteredPassword","_result","_context","preventDefault","current","redirect","replace","console","log","className","auth","children","onSubmit","_x3","control","htmlFor","type","id","required","ref","actions","toggle","onClick","prevState","isLoading","setIsLoading","session","ypdz"],"mappings":"AAAAA,MACCC,OAAyB,iBAAIA,OAAyB,kBAAK,IAAIC,KAAK,CAAC,CAAC,GAAG,CAEpEC,OACA,SAAUC,EAAQC,EAASC,GAEjCF,EAAOC,QAAUC,EAAoB,SAK/BC,KACA,SAAUH,EAAQC,EAASC,IAG1BL,OAAOO,SAAWP,OAAOO,UAAY,IAAIN,KAAK,CAC7C,QACA,WACE,OAAOI,EAAoB,YAO/BG,OACA,SAAUL,EAAQM,EAAqBJ,GAE7C,aAEA,SAASK,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQC,EAAKC,GACpE,IACE,IAAIC,EAAOP,EAAIK,GAAKC,GAChBE,EAAQD,EAAKC,MACjB,MAAOC,GAEP,YADAP,EAAOO,GAILF,EAAKG,KACPT,EAAQO,GAERG,QAAQV,QAAQO,GAAOI,KAAKT,EAAOC,GAIvC,SAASS,EAAkBC,GACzB,OAAO,WACL,IAAIC,EAAOC,KACPC,EAAOC,UACX,OAAO,IAAIP,SAAQ,SAAUV,EAASC,GACpC,IAAIF,EAAMc,EAAGK,MAAMJ,EAAME,GAEzB,SAASd,EAAMK,GACbT,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,OAAQI,GAGlE,SAASJ,EAAOgB,GACdrB,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,QAASgB,GAGnEjB,OAAMkB,OAhCmB3B,EAAoB4B,EAAExB,EAAqB,KAAK,WAAa,OAAOe,MAuC7FU,KACA,SAAU/B,EAAQM,EAAqBJ,GAE7C,aAEAA,EAAoB8B,EAAE1B,GAGtB,IAAI2B,EAAc/B,EAAoB,QAGlCgC,EAAchC,EAAoB,QAGlCiC,EAASjC,EAAoB,QAG7BkC,EAAQlC,EAAoB,QAG5BmC,EAAcnC,EAAoB,QAClCoC,EAAmCpC,EAAoBqC,EAAEF,GAGzDG,EAAmBtC,EAAoB,QAGvCuC,EAAmBvC,EAAoB,QACvCwC,EAAwCxC,EAAoBqC,EAAEE,GAYlE,SAASE,EAAWC,EAAIC,GACtB,OAAOC,EAAYnB,MAAMH,KAAME,WAGjC,SAASoB,IA4CP,OA3CAA,EAAcC,OAAOP,EAAkC,EAAzCO,CAA0DT,EAAoBU,EAAEC,MAAK,SAASC,EAASC,EAAOC,GAC1H,IAAIC,EAAUC,EACd,OAAOhB,EAAoBU,EAAEO,MAAK,SAAmBC,GACnD,OACE,OAAQA,EAAUC,KAAOD,EAAUE,MACjC,KAAK,EAEH,OADAF,EAAUE,KAAO,EACVC,MAAM,kBAAmB,CAC9BC,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CACnBZ,MAAOA,EACPC,SAAUA,IAEZY,QAAS,CACPC,eAAgB,sBAItB,KAAK,EAGH,OAFAZ,EAAWG,EAAUU,KACrBV,EAAUE,KAAO,EACVL,EAASc,OAElB,KAAK,EAGH,GAFAb,EAAOE,EAAUU,KAEbb,EAASe,GAAI,CACfZ,EAAUE,KAAO,EACjB,MAGF,MAAM,IAAIW,MAAMf,EAAKgB,SAAW,wBAElC,KAAK,EACH,OAAOd,EAAUe,OAAO,SAAUjB,GAEpC,KAAK,EACL,IAAK,MACH,OAAOE,EAAUgB,UAGtBtB,QAEcvB,MAAMH,KAAME,WA2GJ,IAAI+C,EAxGjC,WACE,IAAIC,EAAgB3B,OAAOX,EAAc,OAArBW,GAChB4B,EAAmB5B,OAAOX,EAAc,OAArBW,GAEnB6B,EAAY7B,OAAOX,EAAgB,SAAvBW,EAA0B,GACtC8B,EAAUD,EAAU,GACpBE,EAAaF,EAAU,GAEvBG,EAAShC,OAAOb,EAAuB,UAA9Ba,GAYb,SAASiC,IAsCP,OArCAA,EAAiBjC,OAAOP,EAAkC,EAAzCO,CAA0DT,EAAoBU,EAAEC,MAAK,SAASgC,EAAQC,GACrH,IAAIC,EAAcC,EAAyBC,EAE3C,OAAO/C,EAAoBU,EAAEO,MAAK,SAAkB+B,GAClD,OACE,OAAQA,EAAS7B,KAAO6B,EAAS5B,MAC/B,KAAK,EAKH,GAJAwB,EAAMK,iBACNJ,EAAeT,EAAcc,QAAQxE,MACrCoE,EAAkBT,EAAiBa,QAAQxE,MAEvC6D,EACO9B,OAAOZ,EAAe,OAAtBY,CAAyB,cAAe,CAC/C0C,UAAU,EACVtC,MAAOgC,EACP/B,SAAUgC,IAGAnE,OACV8D,EAAOW,QAAQ,iBAGjB,IACEL,EAAU1C,EAAWwC,EAAcC,GACnCO,QAAQC,IAAIP,GACZ,MAAOpE,GACP0E,QAAQC,IAAI3E,GAIlB,KAAK,EACL,IAAK,MACH,OAAOqE,EAASd,UAGrBS,QAEiBtD,MAAMH,KAAME,WAGpC,OAAoBqB,OAAOd,EAAkB,KAAzBc,CAA4B,UAAW,CACzD8C,UAAWnD,EAAyBM,EAAE8C,KACtCC,SAAU,CAAchD,OAAOd,EAAiB,IAAxBc,CAA2B,KAAM,CACvDgD,SAAUlB,EAAU,QAAU,YACf9B,OAAOd,EAAkB,KAAzBc,CAA4B,OAAQ,CACnDiD,SAlDJ,SAAuBC,GACrB,OAAOjB,EAAerD,MAAMH,KAAME,YAkDhCqE,SAAU,CAAchD,OAAOd,EAAkB,KAAzBc,CAA4B,MAAO,CACzD8C,UAAWnD,EAAyBM,EAAEkD,QACtCH,SAAU,CAAchD,OAAOd,EAAiB,IAAxBc,CAA2B,QAAS,CAC1DoD,QAAS,QACTJ,SAAU,eACKhD,OAAOd,EAAiB,IAAxBc,CAA2B,QAAS,CACnDqD,KAAM,QACNC,GAAI,QACJC,UAAU,EACVC,IAAK7B,OAEQ3B,OAAOd,EAAkB,KAAzBc,CAA4B,MAAO,CAClD8C,UAAWnD,EAAyBM,EAAEkD,QACtCH,SAAU,CAAchD,OAAOd,EAAiB,IAAxBc,CAA2B,QAAS,CAC1DoD,QAAS,WACTJ,SAAU,kBACKhD,OAAOd,EAAiB,IAAxBc,CAA2B,QAAS,CACnDqD,KAAM,WACNC,GAAI,WACJC,UAAU,EACVC,IAAK5B,OAEQ5B,OAAOd,EAAkB,KAAzBc,CAA4B,MAAO,CAClD8C,UAAWnD,EAAyBM,EAAEwD,QACtCT,SAAU,CAAchD,OAAOd,EAAiB,IAAxBc,CAA2B,SAAU,CAC3DgD,SAAUlB,EAAU,QAAU,mBACf9B,OAAOd,EAAiB,IAAxBc,CAA2B,SAAU,CACpDqD,KAAM,SACNP,UAAWnD,EAAyBM,EAAEyD,OACtCC,QAtFR,WACE5B,GAAW,SAAU6B,GACnB,OAAQA,MAqFJZ,SAAUlB,EAAU,qBAAuB,0CAwCbvE,EAA6B,QAzBrE,WACE,IAAIsE,EAAY7B,OAAOX,EAAgB,SAAvBW,EAA0B,GACtC6D,EAAYhC,EAAU,GACtBiC,EAAejC,EAAU,GAEzBG,EAAShC,OAAOb,EAAuB,UAA9Ba,GAWb,OAVAA,OAAOX,EAAiB,UAAxBW,EAA2B,WACzBA,OAAOZ,EAAmB,WAA1BY,GAA+B3B,MAAK,SAAU0F,GACxCA,EACF/B,EAAOW,QAAQ,KAEfmB,GAAa,QAGhB,CAAC9B,IAEA6B,EACkB7D,OAAOd,EAAiB,IAAxBc,CAA2B,IAAK,CAClDgD,SAAU,eAIMhD,OAAOd,EAAiB,IAAxBc,CAA2B0B,EAAW,MAOtDsC,KACA,SAAU/G,EAAQC,EAASC,GAGjCF,EAAOC,QAAU,CAAC6F,KAAO,wBAAwBI,QAAU,2BAA2BM,QAAU,2BAA2BC,OAAS,6BAIlI,CAAC,CAAC,OAAO,EAAE,EAAE,EAAE,EAAE"},"name":"static/chunks/pages/auth-214c69f31dbd11342d97.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[8],{\n\n/***/ \"20a2\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(\"nOHt\")\n\n\n/***/ }),\n\n/***/ \"DTHg\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/auth\",\n        function () {\n          return __webpack_require__(\"yk4J\");\n        }\n      ]);\n    \n\n/***/ }),\n\n/***/ \"HaE+\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return _asyncToGenerator; });\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\n/***/ }),\n\n/***/ \"yk4J\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(\"nKUr\");\n\n// EXTERNAL MODULE: ./node_modules/next/router.js\nvar next_router = __webpack_require__(\"20a2\");\n\n// EXTERNAL MODULE: ./node_modules/next-auth/client.js\nvar client = __webpack_require__(\"nGE6\");\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(\"q1tI\");\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(\"o0o1\");\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(\"HaE+\");\n\n// EXTERNAL MODULE: ./components/auth/auth-form.module.css\nvar auth_form_module = __webpack_require__(\"ypdz\");\nvar auth_form_module_default = /*#__PURE__*/__webpack_require__.n(auth_form_module);\n\n// CONCATENATED MODULE: ./components/auth/auth-form.js\n\n\n\n\n\n\n\n\n\nfunction createUser(_x, _x2) {\n  return _createUser.apply(this, arguments);\n}\n\nfunction _createUser() {\n  _createUser = Object(asyncToGenerator[\"a\" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee2(email, password) {\n    var response, data;\n    return regenerator_default.a.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return fetch(\"api/auth/signup\", {\n              method: \"POST\",\n              body: JSON.stringify({\n                email: email,\n                password: password\n              }),\n              headers: {\n                \"Content-Type\": \"application/json\"\n              }\n            });\n\n          case 2:\n            response = _context2.sent;\n            _context2.next = 5;\n            return response.json();\n\n          case 5:\n            data = _context2.sent;\n\n            if (response.ok) {\n              _context2.next = 8;\n              break;\n            }\n\n            throw new Error(data.message || \"Something went wrong\");\n\n          case 8:\n            return _context2.abrupt(\"return\", data);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _createUser.apply(this, arguments);\n}\n\nfunction AuthForm() {\n  var emailInputRef = Object(react[\"useRef\"])();\n  var passwordInputRef = Object(react[\"useRef\"])();\n\n  var _useState = Object(react[\"useState\"])(true),\n      isLogin = _useState[0],\n      setIsLogin = _useState[1];\n\n  var router = Object(next_router[\"useRouter\"])();\n\n  function switchAuthModeHandler() {\n    setIsLogin(function (prevState) {\n      return !prevState;\n    });\n  }\n\n  function submitHandler(_x3) {\n    return _submitHandler.apply(this, arguments);\n  }\n\n  function _submitHandler() {\n    _submitHandler = Object(asyncToGenerator[\"a\" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee(event) {\n      var enteredEmail, enteredPassword, result, _result;\n\n      return regenerator_default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              enteredEmail = emailInputRef.current.value;\n              enteredPassword = passwordInputRef.current.value;\n\n              if (isLogin) {\n                result = Object(client[\"signIn\"])(\"credentials\", {\n                  redirect: false,\n                  email: enteredEmail,\n                  password: enteredPassword\n                });\n\n                if (!result.error) {\n                  router.replace(\"/profile\");\n                }\n              } else {\n                try {\n                  _result = createUser(enteredEmail, enteredPassword);\n                  console.log(_result);\n                } catch (error) {\n                  console.log(error);\n                }\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _submitHandler.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"section\", {\n    className: auth_form_module_default.a.auth,\n    children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\", {\n      children: isLogin ? \"Login\" : \"Sign Up\"\n    }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\", {\n      onSubmit: submitHandler,\n      children: [/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n        className: auth_form_module_default.a.control,\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\", {\n          htmlFor: \"email\",\n          children: \"Your Email\"\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\", {\n          type: \"email\",\n          id: \"email\",\n          required: true,\n          ref: emailInputRef\n        })]\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n        className: auth_form_module_default.a.control,\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\", {\n          htmlFor: \"password\",\n          children: \"Your Password\"\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\", {\n          type: \"password\",\n          id: \"password\",\n          required: true,\n          ref: passwordInputRef\n        })]\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n        className: auth_form_module_default.a.actions,\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\", {\n          children: isLogin ? \"Login\" : \"Create Account\"\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\", {\n          type: \"button\",\n          className: auth_form_module_default.a.toggle,\n          onClick: switchAuthModeHandler,\n          children: isLogin ? \"Create new account\" : \"Login with existing account\"\n        })]\n      })]\n    })]\n  });\n}\n\n/* harmony default export */ var auth_form = (AuthForm);\n// CONCATENATED MODULE: ./pages/auth.js\n\n\n\n\n\n\nfunction AuthPage() {\n  var _useState = Object(react[\"useState\"])(true),\n      isLoading = _useState[0],\n      setIsLoading = _useState[1];\n\n  var router = Object(next_router[\"useRouter\"])();\n  Object(react[\"useEffect\"])(function () {\n    Object(client[\"getSession\"])().then(function (session) {\n      if (session) {\n        router.replace(\"/\");\n      } else {\n        setIsLoading(false);\n      }\n    });\n  }, [router]);\n\n  if (isLoading) {\n    return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\", {\n      children: \"Loading...\"\n    });\n  }\n\n  return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(auth_form, {});\n}\n\n/* harmony default export */ var auth = __webpack_exports__[\"default\"] = (AuthPage);\n\n/***/ }),\n\n/***/ \"ypdz\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\nmodule.exports = {\"auth\":\"auth-form_auth__3FfGf\",\"control\":\"auth-form_control__2m7EA\",\"actions\":\"auth-form_actions__2JT2z\",\"toggle\":\"auth-form_toggle__2PHeb\"};\n\n/***/ })\n\n},[[\"DTHg\",0,1,2,3,4]]]);","inputSourceMap":{"version":3,"sources":["D:\\dev\\portfolio-projekty\\003-nextjs-course-authentication\\node_modules\\next\\router.js","D:\\dev\\portfolio-projekty\\003-nextjs-course-authentication\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-client-pages-loader.js?page=%2Fauth&absolutePagePath=private-next-pages%2Fauth.js!","D:\\dev\\portfolio-projekty\\003-nextjs-course-authentication\\node_modules\\@babel\\runtime\\helpers\\esm\\asyncToGenerator.js","D:\\dev\\portfolio-projekty\\003-nextjs-course-authentication\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!D:\\dev\\portfolio-projekty\\003-nextjs-course-authentication\\components\\auth\\auth-form.js","D:\\dev\\portfolio-projekty\\003-nextjs-course-authentication\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!D:\\dev\\portfolio-projekty\\003-nextjs-course-authentication\\pages\\auth.js","D:\\dev\\portfolio-projekty\\003-nextjs-course-authentication\\node_modules\\next\\dist\\build\\webpack\\plugins\\mini-css-extract-plugin\\src\\loader.js??ref--5-oneOf-2-0!D:\\dev\\portfolio-projekty\\003-nextjs-course-authentication\\node_modules\\next\\dist\\compiled\\css-loader\\cjs.js??ref--5-oneOf-2-1!D:\\dev\\portfolio-projekty\\003-nextjs-course-authentication\\node_modules\\next\\dist\\compiled\\postcss-loader\\cjs.js??ref--5-oneOf-2-2!D:\\dev\\portfolio-projekty\\003-nextjs-course-authentication\\components\\auth\\auth-form.module.css"],"names":[],"mappings":";;;;;;AAAA,iBAAiB,mBAAO,CAAC,MAAsB;;;;;;;;;ACC/C;AACA;AACA;AACA,iBAAiB,mBAAO,CAAC,MAA4B;AACrD;AACA;;;;;;;;;ACNA;AAAA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClCqI;AACnF;AACF;AACoG;AAC3G;AACC;AACF;AACK;;AAE7C;AACA;AACA;;AAEA;AACA,gBAAgB,2CAAiB,eAAe,qBAAmB;AACnE;AACA,WAAW,qBAAmB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA,sBAAsB,uBAAM;AAC5B,yBAAyB,uBAAM;;AAE/B,kBAAkB,yBAAQ;AAC1B;AACA;;AAEA,eAAe,gCAAS;;AAExB;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA,qBAAqB,2CAAiB,eAAe,qBAAmB;AACxE;;AAEA,aAAa,qBAAmB;AAChC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB,wBAAM;AAC/B;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;;AAEA,sBAAsB,2BAAK;AAC3B,eAAe,0BAAO;AACtB,4BAA4B,0BAAI;AAChC;AACA,KAAK,gBAAgB,2BAAK;AAC1B;AACA,8BAA8B,2BAAK;AACnC,mBAAmB,0BAAO;AAC1B,gCAAgC,0BAAI;AACpC;AACA;AACA,SAAS,gBAAgB,0BAAI;AAC7B;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO,gBAAgB,2BAAK;AAC5B,mBAAmB,0BAAO;AAC1B,gCAAgC,0BAAI;AACpC;AACA;AACA,SAAS,gBAAgB,0BAAI;AAC7B;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO,gBAAgB,2BAAK;AAC5B,mBAAmB,0BAAO;AAC1B,gCAAgC,0BAAI;AACpC;AACA,SAAS,gBAAgB,0BAAI;AAC7B;AACA,qBAAqB,0BAAO;AAC5B;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL,GAAG;AACH;;AAEe,sDAAQ,E;;ACpKyB;AACR;AACM;AACF;AACQ;;AAEpD;AACA,kBAAkB,yBAAQ;AAC1B;AACA;;AAEA,eAAe,gCAAS;AACxB,EAAE,0BAAS;AACX,IAAI,4BAAU;AACd;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA,wBAAwB,0BAAI;AAC5B;AACA,KAAK;AACL;;AAEA,sBAAsB,0BAAI,CAAC,SAAQ,IAAI;AACvC;;AAEe,kFAAQ,E;;;;;;;AC/BvB;AACA,kBAAkB,6I","file":"x","sourcesContent":["module.exports = require('./dist/client/router')\n","\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/auth\",\n        function () {\n          return require(\"private-next-pages/auth.js\");\n        }\n      ]);\n    ","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import _regeneratorRuntime from \"D:/dev/portfolio-projekty/003-nextjs-course-authentication/node_modules/@babel/runtime/regenerator\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _asyncToGenerator from \"D:/dev/portfolio-projekty/003-nextjs-course-authentication/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { useState, useRef } from \"react\";\nimport { signIn } from \"next-auth/client\";\nimport { useRouter } from \"next/router\";\nimport classes from \"./auth-form.module.css\";\n\nfunction createUser(_x, _x2) {\n  return _createUser.apply(this, arguments);\n}\n\nfunction _createUser() {\n  _createUser = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(email, password) {\n    var response, data;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return fetch(\"api/auth/signup\", {\n              method: \"POST\",\n              body: JSON.stringify({\n                email: email,\n                password: password\n              }),\n              headers: {\n                \"Content-Type\": \"application/json\"\n              }\n            });\n\n          case 2:\n            response = _context2.sent;\n            _context2.next = 5;\n            return response.json();\n\n          case 5:\n            data = _context2.sent;\n\n            if (response.ok) {\n              _context2.next = 8;\n              break;\n            }\n\n            throw new Error(data.message || \"Something went wrong\");\n\n          case 8:\n            return _context2.abrupt(\"return\", data);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _createUser.apply(this, arguments);\n}\n\nfunction AuthForm() {\n  var emailInputRef = useRef();\n  var passwordInputRef = useRef();\n\n  var _useState = useState(true),\n      isLogin = _useState[0],\n      setIsLogin = _useState[1];\n\n  var router = useRouter();\n\n  function switchAuthModeHandler() {\n    setIsLogin(function (prevState) {\n      return !prevState;\n    });\n  }\n\n  function submitHandler(_x3) {\n    return _submitHandler.apply(this, arguments);\n  }\n\n  function _submitHandler() {\n    _submitHandler = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n      var enteredEmail, enteredPassword, result, _result;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              enteredEmail = emailInputRef.current.value;\n              enteredPassword = passwordInputRef.current.value;\n\n              if (isLogin) {\n                result = signIn(\"credentials\", {\n                  redirect: false,\n                  email: enteredEmail,\n                  password: enteredPassword\n                });\n\n                if (!result.error) {\n                  router.replace(\"/profile\");\n                }\n              } else {\n                try {\n                  _result = createUser(enteredEmail, enteredPassword);\n                  console.log(_result);\n                } catch (error) {\n                  console.log(error);\n                }\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _submitHandler.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/_jsxs(\"section\", {\n    className: classes.auth,\n    children: [/*#__PURE__*/_jsx(\"h1\", {\n      children: isLogin ? \"Login\" : \"Sign Up\"\n    }), /*#__PURE__*/_jsxs(\"form\", {\n      onSubmit: submitHandler,\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: classes.control,\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          htmlFor: \"email\",\n          children: \"Your Email\"\n        }), /*#__PURE__*/_jsx(\"input\", {\n          type: \"email\",\n          id: \"email\",\n          required: true,\n          ref: emailInputRef\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: classes.control,\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          htmlFor: \"password\",\n          children: \"Your Password\"\n        }), /*#__PURE__*/_jsx(\"input\", {\n          type: \"password\",\n          id: \"password\",\n          required: true,\n          ref: passwordInputRef\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: classes.actions,\n        children: [/*#__PURE__*/_jsx(\"button\", {\n          children: isLogin ? \"Login\" : \"Create Account\"\n        }), /*#__PURE__*/_jsx(\"button\", {\n          type: \"button\",\n          className: classes.toggle,\n          onClick: switchAuthModeHandler,\n          children: isLogin ? \"Create new account\" : \"Login with existing account\"\n        })]\n      })]\n    })]\n  });\n}\n\nexport default AuthForm;","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useRouter } from \"next/router\";\nimport { getSession } from \"next-auth/client\";\nimport { useEffect, useState } from \"react\";\nimport AuthForm from \"../components/auth/auth-form\";\n\nfunction AuthPage() {\n  var _useState = useState(true),\n      isLoading = _useState[0],\n      setIsLoading = _useState[1];\n\n  var router = useRouter();\n  useEffect(function () {\n    getSession().then(function (session) {\n      if (session) {\n        router.replace(\"/\");\n      } else {\n        setIsLoading(false);\n      }\n    });\n  }, [router]);\n\n  if (isLoading) {\n    return /*#__PURE__*/_jsx(\"p\", {\n      children: \"Loading...\"\n    });\n  }\n\n  return /*#__PURE__*/_jsx(AuthForm, {});\n}\n\nexport default AuthPage;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"auth\":\"auth-form_auth__3FfGf\",\"control\":\"auth-form_control__2m7EA\",\"actions\":\"auth-form_actions__2JT2z\",\"toggle\":\"auth-form_toggle__2PHeb\"};"]}}